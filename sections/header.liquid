<theme-underlay></theme-underlay>
{% render 'mobile-menu-drawer' %}
{% if settings.use_cart_drawer %} 
  {% render 'cart-drawer' %}
{% endif %}
<header>
  {% if section.settings.enable_pencil_banner %}
  <div class="header__pencil-banner pad-x">
    <span class="mr-0 md:mr-4 text-white font-bold">{{ section.settings.pencil_banner_text }}</span>
    {% if section.settings.pencil_banner_link %}
      <a href="{{ section.settings.pencil_banner_link }}" class="ml-4 rose-avenue peer">
        {{ section.settings.pencil_banner_link_text }}
      </a>
      <span class="transition-transform duration-200 ease-in-out ml-2 peer-hover:translate-x-2.5">→</span>
    {% endif %}
  </div>
{% endif %}
  <div class="header__inner">
    <button class="flex md:hidden cursor-pointer" id="mobile-menu-button" aria-label="Open Mobile Menu">
      <span class="text-2xl pointer-events-none">☰</span>
    </button>
    {% if settings.brand_logo %} 
      <a href="{{ routes.root_url }}" class="header__logo-link">
        <img src="{{ settings.brand_logo | img_url: '200x' }}" alt="{{ shop.name }}" class="header__logo" />
      </a>
    {% else %}
      <h2 class="header__title">
        {{ shop.name | link_to: routes.root_url }}
      </h2>
    {% endif %}

    <div class="header__menu mr-auto ml-12 hidden md:flex">
      {% for link in section.settings.menu.links %}
        {{ link.title | link_to: link.url }}
      {% endfor %}
    </div>

    <div class="header__icons">
      {% if shop.customer_accounts_enabled %}
        <a class="hidden md:block" href="{{ routes.account_url }}">Log In</a>
        <span class="hidden md:block">|</span>
      {% endif %}
      
      {% if settings.use_cart_drawer %} 
          <cart-drawer-trigger class="cursor-pointer" role="button" tabindex="0" aria-label="Open cart">
        {% else %}
          <a href="{{ routes.cart_url }}">
      {% endif %}
        <span class="cart-item-count">{{ cart.item_count }}</span>
        {% render 'icon-cart' %}
      {% if settings.use_cart_drawer %} 
          </cart-drawer-trigger>
        {% else %}
          </a>
      {% endif %}
    </div>
  </div>

</header>

{% style%}

main {
  {% if section.settings.enable_pencil_banner %}
      margin-top: calc(var(--header-height) + var(--pencil-banner-height));
    {% else %}
      margin-top: var(--header-height);
  {% endif %}
}

@media screen and (max-width: 768px) {
  {% if section.settings.enable_pencil_banner %}
    main {
      margin-top: calc(var(--header-height) + var(--pencil-banner-height-mobile));
    }
  {% endif %}
}

header a {
  color: {{ section.settings.main_header_link_color }};
}

.header__pencil-banner,
.header__pencil-banner a {
  color: {{ section.settings.pencil_banner_text_color }};
}
.header__pencil-banner {
  {% if section.settings.use_two_colors %}
    background: linear-gradient(90deg, {{ section.settings.pencil_banner_bg_color_one }}, {{ section.settings.pencil_banner_bg_color_two }});
  {% else %}
    background-color: {{ section.settings.pencil_banner_bg_color_one }};
  {% endif %}
}

{% endstyle %}

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "header",
      "content": "Main Header Settings",
      "info": "Mobile menu drawer settings can be found in 'theme settings' > 'Mobile Menu Drawer'"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Header Menu"
    },
    {
      "type": "color",
      "id": "main_header_link_color",
      "label": "Main Header Link Color",
      "default": "#302952"
    },
    {
      "type": "header",
      "content": "Mobile Menu Drawer Settings"
    },
    {
      "type": "image_picker",
      "id": "mobile_drawer_logo",
      "label": "Mobile Drawer Header Logo"
    },
    {
      "type": "text",
      "id": "mobile_menu_customer_count_text",
      "label": "Customer Count Text",
      "default": "100,000+ Happy Customers"
    },
    {
      "type": "text",
      "id": "mobile_menu_body_title_text",
      "label": "Mobile Menu Body Title Text",
      "default": "Rise to your occasion"
    },
    {
      "type": "url",
      "id": "mobile_menu_body_cta_link",
      "label": "Mobile Menu Body CTA Link"
    },
    {
      "type": "text",
      "id": "mobile_menu_body_cta_text",
      "label": "Mobile Menu Body CTA Text",
      "default": "Shop All"
    },
    {
      "type": "header",
      "content": "Cart Drawer Settings"
    },
    {
      "type": "text",
      "id": "cart_drawer_header_text",
      "label": "Cart Drawer Header Text",
      "default": "Your Cart"
    },
    {
      "type": "checkbox",
      "id": "enable_free_shipping_bar",
      "label": "Enable Free Shipping Bar in Cart Drawer",
      "default": false
    },
    {
      "type": "number",
      "id": "free_shipping_threshold",
      "label": "Free Shipping Threshold Amount (5000 = $50)",
      "default": 5000,
      "visible_if": "{{ section.settings.enable_free_shipping_bar }}"
    },
    {
      "type": "html",
      "id": "cart_drawer_free_shipping_threshold_not_met_text",
      "label": "Free Shipping Bar Text (threshold not met)",
      "visible_if": "{{ section.settings.enable_free_shipping_bar }}"
    },
    {
      "type": "html",
      "id": "cart_drawer_free_shipping_threshold_met_text",
      "label": "Free Shipping Bar Text (threshold met)",
      "visible_if": "{{ section.settings.enable_free_shipping_bar }}"
    },
    {
      "type": "text",
      "id": "cart_drawer_empty_cart_text",
      "label": "Empty Cart Text",
      "default": "Your cart is empty!"
    },
    {
      "type": "text",
      "id": "cart_drawer_empty_cart_subtext",
      "label": "Empty Cart Subtext",
      "default": "Add your favorite items to your cart."
    },
    {
      "type": "text",
      "id": "cart_drawer_empty_cart_cta_text",
      "label": "Empty Cart CTA Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "cart_drawer_empty_cart_cta_link",
      "label": "Empty Cart CTA Link"
    },
    {
      "type": "header",
      "content": "Pencil Banner Settings"
    },
    {
      "type": "checkbox",
      "id": "enable_pencil_banner",
      "label": "Enable Pencil Banner",
      "default": false
    },
    {
      "type": "text",
      "id": "pencil_banner_text",
      "label": "Pencil Banner Text",
      "default": "Free shipping on orders over $50",
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    },
    {
      "type": "url",
      "id": "pencil_banner_link",
      "label": "Pencil Banner Link URL",
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    },
    {
      "type": "text",
      "id": "pencil_banner_link_text",
      "label": "Pencil Banner Link Text",
      "default": "Shop Now",
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    },
    {
      "type": "color",
      "id": "pencil_banner_text_color",
      "label": "Pencil Banner Text Color",
      "default": "#ffffff",
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    },
    {
      "type": "color",
      "id": "pencil_banner_bg_color_one",
      "label": "Pencil Banner Background Color One",
      "default": "#302952",
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    },
    {
      "type": "checkbox",
      "id": "use_two_colors",
      "label": "Use Two Background Colors (gradient)",
      "default": false,
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    },
    {
      "type": "color",
      "id": "pencil_banner_bg_color_two",
      "label": "Pencil Banner Background Color Two (optional)",
      "visible_if": "{{ section.settings.enable_pencil_banner }}"
    }
  ],
  "blocks": [
    {
      "type": "cart-icon",
      "name": "Cart Icon",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "cart_icon_image_1",
          "label": "Cart Icon Image 1"
        },
        {
          "type": "text",
          "id": "cart_icon_text_1",
          "label": "Cart Icon Text 1",
          "visible_if": "{{ block.settings.cart_icon_image_1 }}"
        },
        {
          "type": "image_picker",
          "id": "cart_icon_image_2",
          "label": "Cart Icon Image 2"
        },
        {
          "type": "text",
          "id": "cart_icon_text_2",
          "label": "Cart Icon Text 2",
          "visible_if": "{{ block.settings.cart_icon_image_2 }}"
        },
        {
          "type": "image_picker",
          "id": "cart_icon_image_3",
          "label": "Cart Icon Image 3"
        },
        {
          "type": "text",
          "id": "cart_icon_text_3",
          "label": "Cart Icon Text 3",
          "visible_if": "{{ block.settings.cart_icon_image_3 }}"
        },
        {
          "type": "image_picker",
          "id": "cart_icon_image_4",
          "label": "Cart Icon Image 4"
        },
        {
          "type": "text",
          "id": "cart_icon_text_4",
          "label": "Cart Icon Text 4",
          "visible_if": "{{ block.settings.cart_icon_image_4 }}"
        }
      ]
    }
  ]
}
{% endschema %}
